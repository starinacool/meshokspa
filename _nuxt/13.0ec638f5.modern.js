(window.webpackJsonp=window.webpackJsonp||[]).push([[13,194],{1193:function(e,t,o){var s=o(1411);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,o(26).default)("585fb788",s,!0,{sourceMap:!1})},1396:function(e,t,o){"use strict";o(24);var s=o(1),i=o(12),r=(o(47),o(2)),a=o(0),n=o(23),l=o(968),d=o(959),c=o(963),m=o(40);function getMessageFromLoginError(e,t){var o=e.info;switch(o.code){case 0:return t.t("Errors > Error > Try Later");case 2:return o.attemptsRemaining>0?t.t("Auth > Login Failed > Wrong Password",{n:o.attemptsRemaining}):t.t("Auth > Login Failed > Wrong Password > No Attempts Left");case 3:return t.t("Auth > Login Failed > Captcha Error");default:return null}}function isLoginError(e){return e instanceof a.sc||"object"==typeof e&&null!==e&&"name"in e&&"LoginError"===e.name}var u=o(58),w=o(75),v=o(32),p=o(5),h=o(6);function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){Object(i.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function getActivationDataFromRoute(e){var t={userId:0,activationCode:null},o=e.query.activation||null;if(!o)return t;Array.isArray(o)&&(o=o.join());var s=o.split("-");return s[0]&&s[1]?{userId:+s[0],activationCode:s[1]}:t}function getActivationReturnUrl(e,t){var o=Object(w.p)(e);return o._mode="activation",t.resolve({query:o}).href}var g=Object(u.a)(r.a,c.a).extend({name:"authorization-form",serverCacheKey:()=>"authorization-form",components:{CityAutocomplete:d.a},props:{isModal:{type:Boolean,default:!1}},data(){return{forms:{login:_objectSpread({},{email:"",password:""}),loginNewBrowser:{code:""},registration:{email:""},activation:{activationCode:getActivationDataFromRoute(this.$route).activationCode||"",cityId:(e=this.$store,t=h.currentUserGetters.userLocation(e),t?t.id:0)},restorePassword:{email:""},"restorePasswordMobileNumberСomplete":{lastDigits:""},newPassword:{emailCode:"",smsCode:"",newPassword:"",cityId:0}},activationCodeFromUrl:getActivationDataFromRoute(this.$route).activationCode,userIdFromUrl:getActivationDataFromRoute(this.$route).userId,newPasswordUserCityRequired:!1,newPasswordSmsCodeRequired:!1,newPasswordWrongCodeAfterTry:!1,newPasswordWrongUrl:!1,newPasswordEmailCaption:"",newPasswordEmailCaptionIsError:!1,newPasswordSmsCaption:"",newPasswordSmsCaptionIsError:!1,newPasswordNextAttemptTime:0,restorePasswordMobileNumberLastDigitsNextAttemptTime:0,restorePasswordEmailCodeNextAttemptTime:0,restorePasswordSmsCodeNextAttemptTime:0,showActivationPassword:!1,showPasswordOnNewPasswordField:!1,loginFailed:!1,loginNewBrowserHint:"",loginNewBrowserHintWarning:!1,isPasswordExpired:!1,activationMailRetryInterval:30,activationMailRetryCountdown:0,loading:{registration:!1,login:!1,loginNewBrowser:!1,activation:!1,activationMail:!1,restorePassword:!1,restorePasswordMobileNumberComplete:!1,newPassword:!1,newPasswordUserCityInfo:!1,newPasswordUserMobilePhoneInfo:!1},newPasswordDialogOpenedFromEmail:!0,validationResult:{login:{email:[],password:[]},loginNewBrowser:{code:[]},registration:{email:[]},activation:{activationCode:[],cityId:[]},restorePassword:{email:[]},"restorePasswordMobileNumberСomplete":{lastDigits:[]},newPassword:{newPassword:[],cityId:[],emailCode:[],smsCode:[]}},showAutocompleteDialog:!1};var e,t},computed:{helpLoading(){return m.jivoGetters.isLoading(this.$store)},rules(){return{login:{email:[a.Ue.required(this.$ln.t("Errors > Email > Required")),a.Ue.email(this.$ln.t("Errors > Email > Format"))],password:[a.Ue.passwordRequired(this.$ln.t("Errors > Password > Required"))]},loginNewBrowser:{code:[a.Ue.required(this.$ln.t("Auth > Errors > Activation Code > Required"))]},registration:{email:[a.Ue.required(this.$ln.t("Errors > Email > Required")),a.Ue.email(this.$ln.t("Errors > Email > Format"))]},activation:{activationCode:[a.Ue.required(this.$ln.t("Auth > Errors > Activation Code > Required")),a.Ue.minLength(6,this.$ln.t("Auth > Errors > Activation Code > Min Length"))],cityId:[a.Ue.isPositive(this.$ln.t("Errors > City > Required"))]},restorePassword:{email:[a.Ue.required(this.$ln.t("Errors > Email > Required")),a.Ue.email(this.$ln.t("Errors > Email > Format"))]},"restorePasswordMobileNumberСomplete":{lastDigits:[a.Ue.required(this.$ln.t("Errors > Last Digits > Required")),a.Ue.minLength(5,this.$ln.t("Errors > Last Digits > Length")),a.Ue.maxLength(5,this.$ln.t("Errors > Last Digits > Length"))]},newPassword:{newPassword:[a.Ue.minPasswordLength(6,this.$ln.t("Errors > Password > Min Length"))],cityId:this.newPasswordUserCityRequired?[a.Ue.isPositive(this.$ln.t("Errors > City > Required"))]:[],emailCode:[a.Ue.required(this.$ln.t("Errors > Email Code > Required"))],smsCode:this.newPasswordSmsCodeRequired?[a.Ue.required(this.$ln.t("Errors > Sms Code > Required"))]:[]}}},dialog(){return this.$store.state.dialogs.authorization},userMail(){var e=h.currentUserGetters.user(this.$store);return e?e.email:""},mailClientUrl(){var e=h.currentUserGetters.user(this.$store);return e&&e.email.endsWith("gmail.com")?"https://mail.google.com/mail/u/0/#all":null},isActivated(){return this.userClaims.activation},mode(){return this.dialog.mode},userClaims(){return h.currentUserGetters.userClaims(this.$store)},restorePasswordMobileNumberFirstDigits(){return p.authGetters.cellPhoneDigits(this.$store)}},methods:{isAuthorizationDialogCompletelyClosed(){return void 0===this.$route.query._auth},openHelp(){var e=this;return Object(s.a)((function*(){yield m.jivoActions.toggleChat(e.$store)}))()},verifyLoginNewBrowserCode(){var e=this;return Object(s.a)((function*(){e.loading.loginNewBrowser=!0,e.loginNewBrowserHintWarning=!1,e.validateForm("loginNewBrowser")&&(yield e.login(e.forms.loginNewBrowser.code)),e.loading.loginNewBrowser=!1}))()},login(e){var t=this;return Object(s.a)((function*(){if(t.loading.login=!0,t.validateForm("login"))try{yield p.authActions.login(t.$store,{email:t.forms.login.email,password:t.forms.login.password,code:e});var{authorizationCallback:o}=window;t.dialog.isShown&&t.closeDialog(!0),o?(yield Object(a.Ve)((()=>t.isAuthorizationDialogCompletelyClosed()&&!!h.currentUserGetters.user(t.$store)),!0),yield o()):v.notificationsMutations.showNotification(t.$store,{text:t.dialog.login.notificationText})}catch(e){if(!isLoginError(e))throw e;if(5===e.info.code)return t.loginNewBrowserHint=t.$ln.t("Auth > Login > New Browser > Hint",{sendType:t.$ln.t("Auth > Login > New Browser > Hint > SMS",{lastDigits:e.info.lastDigits})}),void t.setMode("login-new-browser");if(6===e.info.code)return t.loginNewBrowserHint=t.$ln.t("Auth > Login > New Browser > Hint",{sendType:t.$ln.t("Auth > Login > New Browser > Hint > Email")}),void t.setMode("login-new-browser");if(7===e.info.code)return t.loginNewBrowserHint=t.$ln.t("Auth > Login > New Browser > Hint > Max Tries Reached"),t.setMode("login-new-browser"),void(t.loginNewBrowserHintWarning=!0);if(8===e.info.code)return t.loginNewBrowserHint=t.$ln.t("Auth > Login > New Browser > Hint > Wrong Code",{n:e.info.attemptsRemaining}),t.setMode("login-new-browser"),void(t.loginNewBrowserHintWarning=!0);if(9===e.info.code)return t.loginNewBrowserHint=t.$ln.t("Auth > Login > New Browser > Hint > SMS Error"),t.setMode("login-new-browser"),void(t.loginNewBrowserHintWarning=!0);if(10===e.info.code)return void t.validationResult.login.email.push(t.$ln.t("Auth > Errors > User Banned"));if(t.loginFailed=!0,4===e.info.code)t.forms.restorePassword.email=t.forms.login.email,t.isPasswordExpired=!0,t.setMode("restore-password"),t.focus("restorePassword.email");else{var s=getMessageFromLoginError(e,t.$ln),i=t.$vuetify.breakpoint.xs?t.$ln.t("Auth > Login Failed > Short"):t.$ln.t("Auth > Login Failed");v.notificationsMutations.showNotification(t.$store,{text:s||i,position:{top:!0,bottom:!1,left:!1,right:!1},color:"red darken-2"}),t.setMode("login"),t.focus("login.password")}}finally{t.loading.login=!1}t.loading.login=!1}))()},register(){var e=this;return Object(s.a)((function*(){if(e.loading.registration=!0,e.validateForm("registration"))try{yield p.authActions.register(e.$store,{activationReturnURL:getActivationReturnUrl(e.$route,e.$router),captchaAction:a.r.Registration,captchaToken:"1",email:e.forms.registration.email}),e.initActivationMailCountdown(e.activationMailRetryInterval);var{authorizationCallback:t}=window;t?(yield Object(a.Ve)((()=>e.isAuthorizationDialogCompletelyClosed()&&!!h.currentUserGetters.user(e.$store)),!0),yield t(),e.isActivated||(e.initActivationMailCountdown(e.activationMailRetryInterval),e.setMode("activation"))):e.setMode("activation")}catch(t){console.error("Failed to register",t);var o=e.$ln.t("Errors > Error > Try Later");if(t instanceof a.u&&t.errors.filter((e=>1===e.code)))o=e.$ln.t("Auth > Registration > Email Exists"),e.forms.login.email=e.forms.registration.email,e.setMode("login"),e.focus("login.password");else if(isLoginError(t)){var s=getMessageFromLoginError(t,e.$ln);s&&(o=s),e.loginFailed=!0}else console.error(t);v.notificationsMutations.showNotification(e.$store,{text:o,position:{top:!0,bottom:!1,left:!1,right:!1},color:"red darken-2"})}e.loading.registration=!1}))()},getFirstDigitsOfMobileNumber(){var e=this;return Object(s.a)((function*(){e.loading.restorePassword=!0;try{yield p.authActions.loadFirstDigitsOfMobileNumber(e.$store,e.forms.restorePassword.email)}catch(o){var t=e.$ln.t("Auth > Errors > Email Not Found");return o.innerError&&"UserBannedError"===o.innerError.name&&(t=e.$ln.t("Auth > Errors > User Banned")),e.validationResult.restorePassword.email.push(t),void(e.loading.restorePassword=!1)}e.restorePasswordMobileNumberFirstDigits?(e.newPasswordSmsCodeRequired=!0,e.showRestorePasswordMobileNumberCompleteForm()):yield e.sendRestorePasswordCodes(),e.loading.restorePassword=!1}))()},sendRestorePasswordCodes(){var e=arguments,t=this;return Object(s.a)((function*(){var o,s,i=e.length>0&&void 0!==e[0]?e[0]:a.id.All;if(t.validateForm("restorePassword")&&(!t.restorePasswordMobileNumberFirstDigits||t.validateForm("restorePasswordMobileNumberСomplete"))){t.loading.restorePassword=!0,t.loading.restorePasswordMobileNumberComplete=!0;try{var r=Object(w.p)(t.$route);r._mode="new-password";var n=t.$router.resolve({query:r}).href;yield p.authActions.sendPasswordRestorationCodes(t.$store,{captchaAction:a.r.RestorePassword,captchaToken:"1",email:t.forms.restorePassword.email,lastDigits:t.forms.restorePasswordMobileNumberСomplete.lastDigits||void 0,returnUrl:n,sendCodeBy:i});var l=p.authGetters.passwordRestorationResult(t.$store);if(!l)return;if(0===l.code&&(l.shouldSendSms&&l.smsSent&&(t.setRestorePasswordSmsCodeCaption(t.$ln.t("Auth > New Password > Sms Code Sent")),t.restorePasswordSmsCodeNextAttemptTime=l.smsNextAttemptTime),l.shouldSendEmail&&l.emailSent&&(t.setRestorePasswordEmailCodeCaption(t.$ln.t("Auth > New Password > Email Code Sent")),t.restorePasswordEmailCodeNextAttemptTime=l.emailNextAttemptTry),t.newPasswordUserCityRequired=l.isCityRequired,t.forms.newPassword.cityId=(null===(o=h.currentUserGetters.userLocation(t.$store))||void 0===o?void 0:o.id)||0,t.showSendCodeNotification(i,!0)),1===l.code)return t.validationResult.restorePasswordMobileNumberСomplete.lastDigits.push(t.$ln.t("Auth > Restore Password > Error Last Digits")),l.lastDigitsNextAttemptTime>0&&(t.restorePasswordMobileNumberLastDigitsNextAttemptTime=l.lastDigitsNextAttemptTime),t.loading.restorePassword=!1,void(t.loading.restorePasswordMobileNumberComplete=!1);if(2===l.code){if(t.newPasswordUserCityRequired=l.isCityRequired,t.forms.newPassword.cityId=(null===(s=h.currentUserGetters.userLocation(t.$store))||void 0===s?void 0:s.id)||0,l.smsStatus)switch(l.smsStatus.code){case 0:t.setRestorePasswordSmsCodeCaption(t.$ln.t("Auth > New Password > Sms Code Sent")),t.restorePasswordSmsCodeNextAttemptTime=l.smsStatus.nextAttemptTime;break;case 1:t.setRestorePasswordSmsCodeCaption(t.$ln.t("Auth > New Password > Sms Code Sending Error 1",{s:l.smsStatus.sentTimes}),!0),t.restorePasswordSmsCodeNextAttemptTime=l.smsStatus.nextAttemptTime;break;case 2:t.setRestorePasswordSmsCodeCaption(t.$ln.t("Auth > New Password > Sms Code Sending Error 2"),!0),t.restorePasswordSmsCodeNextAttemptTime=l.smsStatus.nextAttemptTime;break;case 3:t.setRestorePasswordSmsCodeCaption(t.$ln.t("Auth > New Password > Sms Code Sending Error 3"),!0),t.restorePasswordSmsCodeNextAttemptTime=0}if(l.emailStatus)switch(l.emailStatus.code){case 0:t.setRestorePasswordEmailCodeCaption(t.$ln.t("Auth > New Password > Email Code Sent")),t.restorePasswordEmailCodeNextAttemptTime=l.emailStatus.nextAttemptTime;break;case 1:t.setRestorePasswordEmailCodeCaption(t.$ln.t("Auth > New Password > Email Code Sending Error 1",{s:l.emailStatus.sentTimes}),!0),t.restorePasswordEmailCodeNextAttemptTime=l.emailStatus.nextAttemptTime;break;case 2:t.setRestorePasswordEmailCodeCaption(t.$ln.t("Auth > New Password > Email Code Sending Error 2"),!0),t.restorePasswordEmailCodeNextAttemptTime=l.emailStatus.nextAttemptTime;break;case 3:t.setRestorePasswordEmailCodeCaption(t.$ln.t("Auth > New Password > Email Code Sending Error 3"),!0),t.restorePasswordEmailCodeNextAttemptTime=0}!l.smsStatus&&l.emailStatus&&t.showSendCodeNotification(a.id.Email,0===l.emailStatus.code),!l.emailStatus&&l.smsStatus&&t.showSendCodeNotification(a.id.Sms,0===l.smsStatus.code)}if(3===l.code)return v.notificationsMutations.showNotification(t.$store,{text:t.$ln.t("Errors > Error > Try Later")}),t.loading.restorePassword=!1,void(t.loading.restorePasswordMobileNumberComplete=!1)}catch(e){console.error("Failed to send restoration codes",e),e instanceof a.K?(i!==a.id.All&&i!==a.id.Sms||(t.restorePasswordSmsCodeNextAttemptTime=0,t.setRestorePasswordSmsCodeCaption(t.$ln.t("Auth > New Password > Sms Code Sent"))),i!==a.id.All&&i!==a.id.Email||(t.restorePasswordEmailCodeNextAttemptTime=0,t.setRestorePasswordEmailCodeCaption(t.$ln.t("Auth > New Password > Email Code Sent"))),t.showSendCodeNotification(i,!0)):(t.setRestorePasswordSmsCodeCaption(t.$ln.t("Auth > New Password > Sms Code Sending Error 3"),!0),t.setRestorePasswordEmailCodeCaption(t.$ln.t("Auth > New Password > Email Code Sending Error 3"),!0),t.showSendCodeNotification(i,!1))}t.loading.restorePassword=!1,t.loading.restorePasswordMobileNumberComplete=!1,t.newPasswordDialogOpenedFromEmail=!1,t.setMode("new-password")}}))()},resendNewPasswordEmailCode(){var e=this;return Object(s.a)((function*(){return e.sendRestorePasswordCodes(a.id.Email)}))()},resendNewPasswordSmsCode(){var e=this;return Object(s.a)((function*(){return e.sendRestorePasswordCodes(a.id.Sms)}))()},setNewPassword(){var e=this;return Object(s.a)((function*(){if(e.loading.newPassword=!0,e.validateForm("newPassword"))try{yield p.authActions.setRestoredPassword(e.$store,{cityId:e.forms.newPassword.cityId,email:e.forms.restorePassword.email,emailCode:e.forms.newPassword.emailCode,newPassword:e.forms.newPassword.newPassword,smsCode:e.forms.newPassword.smsCode,userId:e.userIdFromUrl}),v.notificationsMutations.showNotification(e.$store,{text:e.$ln.t("Auth > New Password > Success")}),e.closeDialog(!1)}catch(t){"WrongActivationCodeError"===t.name&&(e.newPasswordWrongCodeAfterTry=!0,e.focus("newPassword.emailCode"),t.nextAttemptTime&&t.nextAttemptTime>0&&(e.newPasswordNextAttemptTime=t.nextAttemptTime))}e.loading.newPassword=!1}))()},activate(){var e=this;return Object(s.a)((function*(){if(e.validateForm("activation")){e.loading.activation=!0;try{var t=getActivationDataFromRoute(e.$route).userId,o=p.authGetters.userId(e.$store)||0,s=t||o;if(!s)throw new Error("Unknown user id");yield p.authActions.activate(e.$store,{activationCode:e.forms.activation.activationCode,userId:s,cityId:e.forms.activation.cityId,returnUrl:getActivationReturnUrl(e.$route,e.$router)});var{authorizationCallback:i}=window;e.dialog.isShown&&e.closeDialog(!0),delete Object(w.p)(e.$route).activation;var r=e.$ln.t("Activation > Completed");i?(yield Object(a.Ve)((()=>e.isAuthorizationDialogCompletelyClosed()&&p.authGetters.isLoggedIn(e.$store)&&!!h.currentUserGetters.user(e.$store)&&h.currentUserGetters.user(e.$store).isActivated),!0),yield i()):v.notificationsMutations.showNotification(e.$store,{text:r})}catch(t){"WrongActivationCodeError"!==t.name||e.activationCodeFromUrl?"ActivationCodeExpiredError"!==t.name||e.activationCodeFromUrl?v.notificationsMutations.showNotification(e.$store,{text:e.$ln.t("Activation > Failed"),color:"red"}):(e.forms.activation.activationCode="",yield e.$nextTick(),e.validationResult.activation.activationCode.push(e.$ln.t("Auth > Errors > Activation Code > Expired")),e.focus("activation.activationCode")):(e.validationResult.activation.activationCode.push(e.$ln.t("Auth > Errors > Activation Code > Wrong Code")),e.focus("activation.activationCode"))}e.loading.activation=!1}else e.focus("activation.activationCode")}))()},initActivationMailCountdown(e){var t=this;t.activationMailCountdown&&(clearTimeout(t.activationMailCountdown),t.activationMailCountdown=null);var startCountdown=()=>{this.activationMailRetryCountdown>0&&(this.activationMailRetryCountdown--,t.activationMailCountdown=setTimeout(startCountdown,1e3))};this.activationMailRetryCountdown=e+1,t.activationMailCountdown=startCountdown()},resendActivationMail(){var e=this;return Object(s.a)((function*(){if(e.activationMailRetryCountdown>0)v.notificationsMutations.showNotification(e.$store,{text:e.$ln.t("Auth > Activation > Code Sending Timeout",{s:e.activationMailRetryCountdown}),color:"red"});else{e.loading.activationMail=!0;try{yield e.$commandProcessor.execute(new a.hd({returnUrl:e.$route.fullPath})),e.initActivationMailCountdown(e.activationMailRetryInterval),v.notificationsMutations.showNotification(e.$store,{text:e.$ln.t("Auth > Activation > Activation Code Resent")})}catch(t){if(t.name&&t.name===a.lc.name&&t.secondsToNextTry)return e.initActivationMailCountdown(+t.secondsToNextTry),void v.notificationsMutations.showNotification(e.$store,{text:e.$ln.t("Auth > Activation > Code Sending Timeout",{s:e.activationMailRetryCountdown}),color:"red"});v.notificationsMutations.showNotification(e.$store,{text:e.$ln.t("Auth > Activation > Code Sending Failure"),color:"red"})}e.loading.activationMail=!1,e.focus("activation.activationCode")}}))()},showRegistrationForm(){this.setMode("registration"),this.forms.registration.email=this.dialog.email||this.forms.login.email,this.focus("registration.email")},showLoginForm(){this.setMode("login"),this.forms.login.email=this.dialog.email||this.forms.registration.email||this.forms.restorePassword.email,this.focus("login.email")},showActivationForm(){this.setMode("activation"),this.activationCodeFromUrl?this.focus("activation.password"):this.focus("activation.activationCode")},showRestorePasswordForm(){this.setMode("restore-password"),this.forms.restorePassword.email=this.dialog.email||this.forms.login.email,this.focus("restorePassword.email")},showRestorePasswordMobileNumberCompleteForm(){this.setMode("restore-password-mobile-number-complete"),this.focus("restorePasswordMobileNumberComplete.lastDigits")},showNewPasswordForm(){this.setMode("new-password"),this.focus("newPassword.newPassword")},closeDialog(e){this.resetValidation(),this.$emit("hide-completed",e)},showAppropriateForm(){this.resetValidation();var e=this.dialog.requirements.filter((e=>!this.userClaims[e])),t=this.$route.query.mode||this.dialog.mode;e.includes("account")?"activation"===t?this.showActivationForm():"registration"===t?this.showRegistrationForm():"login"===t?this.showLoginForm():"new-password"===t?this.showNewPasswordForm():p.authGetters.isLoggedInBefore(this.$store)?this.showLoginForm():this.showRegistrationForm():e.includes("activation")?this.showActivationForm():"activation"!==t&&"new-password"!==t&&"restore-password"!==t&&this.setMode("login")},resetValidation(){Object(l.a)(this.validationResult.login),Object(l.a)(this.validationResult.registration),Object(l.a)(this.validationResult.activation)},resetData(){this.forms.activation.activationCode="",this.forms.login={email:"",password:""},this.isPasswordExpired=!1},setMode(e){this.$emit("mode-changed",e)},setRestorePasswordSmsCodeCaption(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.newPasswordSmsCaptionIsError=t,this.newPasswordSmsCaption=e},setRestorePasswordEmailCodeCaption(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.newPasswordEmailCaptionIsError=t,this.newPasswordEmailCaption=e},showSendCodeNotification(e,t){e!==a.id.All&&(e===a.id.Sms&&(t?v.notificationsMutations.showNotification(this.$store,{text:this.$ln.t("Auth > Common > Sms Sent")}):v.notificationsMutations.showNotification(this.$store,{text:this.$ln.t("Auth > Common > Sms Not Sent"),color:"red darken-2"})),e===a.id.Email&&(t?v.notificationsMutations.showNotification(this.$store,{text:this.$ln.t("Auth > Common > Email Sent")}):v.notificationsMutations.showNotification(this.$store,{text:this.$ln.t("Auth > Common > Email Not Sent"),color:"red darken-2"})))}},mounted(){n.checkAuthorizationDialogStateTextsEmpty(this.$store)&&n.setAuthorizationDialogState(this.$store,n.createCommonAuthDialog(this.$ln)),this.isModal&&this.showAppropriateForm()},watch:{mode:{immediate:!0,handler(e){var t=this;return Object(s.a)((function*(){if("new-password"===e){if(!t.newPasswordDialogOpenedFromEmail)return;if(p.authGetters.isLoggedIn(t.$store)&&(yield p.authActions.logout(t.$store)),!t.loading.newPasswordUserCityInfo){if(!t.activationCodeFromUrl)return void(t.newPasswordWrongUrl=!0);t.setRestorePasswordEmailCodeCaption(t.$ln.t("Auth > New Password > Email Code Sent")),t.forms.newPassword.emailCode=t.activationCodeFromUrl,t.loading.newPasswordUserCityInfo=!0;try{var o=yield t.$commandProcessor.execute(new a.bc({code:t.activationCodeFromUrl}));!0===o.userLocation?t.newPasswordUserCityRequired=!1:(t.newPasswordUserCityRequired=!0,o.userLocation.id&&(t.forms.newPassword.cityId=o.userLocation.id)),t.newPasswordSmsCodeRequired=o.smsCodeRequired,o.smsCodeRequired&&t.setRestorePasswordSmsCodeCaption(t.$ln.t("Auth > New Password > Sms Code Sent"))}catch(e){"WrongActivationCodeError"===e.name&&(t.newPasswordWrongUrl=!0)}t.loading.newPasswordUserCityInfo=!1}}}))()}}}}),f=o(1410),C=o(10),P=o(39),b=o.n(P),y=o(400),x=o(1123),_=o(931);var $=Object(C.a)(g,(function(){var e,t,o,s,i=this,r=i.$createElement,a=i._self._c||r;return a("div",{ref:"dialog"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"registration"===i.mode,expression:"mode === 'registration'"},{name:"data-test",rawName:"v-data-test",value:"auth/registration-form",expression:"'auth/registration-form'"}],staticClass:"registration-form"},[a("div",{class:i.$style.content},[a("div",{staticClass:"pb-2"},[a("div",[i._v(i._s(i.dialog.registration.hint))])]),i._v(" "),a("v-form",{attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),i.register(e)}}},[a("v-text-field",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/email",expression:"`auth/email`"}],ref:"registration.email",staticClass:"pb-2 pt-1",attrs:{"error-messages":i.validationResult.registration.email,label:i.$ln.t("Auth > Email"),name:"email","prepend-icon":"email",type:"email"},model:{value:i.forms.registration.email,callback:function(e){i.$set(i.forms.registration,"email",e)},expression:"forms.registration.email"}}),i._v(" "),a("div",{staticClass:"google-captcha-info",domProps:{innerHTML:i._s(i.$ln.t("Auth > Captcha"))}}),i._v(" "),a("button",{staticStyle:{display:"none"}})],1)],1),i._v(" "),a("div",{class:i.$style.buttons},[a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/register",expression:"'auth/register'"}],attrs:{loading:i.loading.registration,color:"red darken-2 white--text"},on:{click:i.register}},[i._v(i._s(i.dialog.registration.actionText))]),i._v(" "),a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/open-login-form",expression:"'auth/open-login-form'"}],attrs:{color:"primary",flat:""},on:{click:i.showLoginForm}},[i._v(i._s(i.$ln.t("Auth > Registration > Redirect to Login")))]),i._v(" "),a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/help",expression:"'auth/help'"}],attrs:{loading:i.helpLoading,color:"primary",flat:""},on:{click:i.openHelp}},[i._v(i._s(i.$ln.t("Common > Help")))])],1)]),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"login"===i.mode,expression:"mode === 'login'"},{name:"data-test",rawName:"v-data-test",value:"auth/login-form",expression:"'auth/login-form'"}],staticClass:"login-form"},[a("div",{class:i.$style.content},[a("div",{staticClass:"pb-2"},[a("div",[i._v(i._s(i.dialog.login.hint))])]),i._v(" "),a("v-form",{on:{submit:function(e){return e.preventDefault(),i.login()}}},[a("v-text-field",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/email",expression:"`auth/email`"}],ref:"login.email",attrs:{"error-messages":i.validationResult.login.email,label:i.$ln.t("Auth > Email"),autocomplete:"username",name:"email","prepend-icon":"email",type:"email"},model:{value:i.forms.login.email,callback:function(e){i.$set(i.forms.login,"email",e)},expression:"forms.login.email"}}),i._v(" "),a("v-text-field",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/password",expression:"`auth/password`"}],ref:"login.password",attrs:{"error-messages":i.validationResult.login.password,label:i.$ln.t("Auth > Password"),autocomplete:"current-password","prepend-icon":"lock",type:"password"},model:{value:i.forms.login.password,callback:function(e){i.$set(i.forms.login,"password",e)},expression:"forms.login.password"}},[a("div",{attrs:{slot:"append"},slot:"append"},[a("a",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/forgot-password",expression:"'auth/forgot-password'"}],class:(e={},e[i.$style.forgotPassword]=!0,e[i.$style.loginFailed]=i.loginFailed,e),attrs:{href:"javascript:void(0);"},on:{click:i.showRestorePasswordForm}},[i._v(i._s(i.$ln.t("Auth > Login > Forgotten Password")))])])]),i._v(" "),a("button",{staticStyle:{display:"none"}})],1)],1),i._v(" "),a("div",{class:i.$style.buttons},[a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/login",expression:"'auth/login'"}],attrs:{loading:i.loading.login,color:"red darken-2 white--text"},on:{click:function(e){return i.login()}}},[i._v(i._s(i.dialog.login.actionText))]),i._v(" "),a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/open-registration-form",expression:"'auth/open-registration-form'"}],attrs:{color:"primary",flat:""},on:{click:i.showRegistrationForm}},[i._v(i._s(i.$ln.t("Auth > Login > Redirect to Registration")))]),i._v(" "),a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/help",expression:"'auth/help'"}],attrs:{loading:i.helpLoading,color:"primary",flat:""},on:{click:i.openHelp}},[i._v(i._s(i.$ln.t("Common > Help")))])],1)]),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"login-new-browser"===i.mode,expression:"mode === 'login-new-browser'"},{name:"data-test",rawName:"v-data-test",value:"auth/login-new-browser-form",expression:"'auth/login-new-browser-form'"}],staticClass:"login-new-browser-form"},[a("div",{class:i.$style.content},[a("div",{class:(t={},t[i.$style.warningCaption]=i.loginNewBrowserHintWarning,t),domProps:{innerHTML:i._s(i.loginNewBrowserHint)}}),i._v(" "),a("v-form",{attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),i.verifyLoginNewBrowserCode(e)}}},[a("v-text-field",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/code",expression:"`auth/code`"}],ref:"loginNewBrowser.code",attrs:{"error-messages":i.validationResult.loginNewBrowser.code,label:i.$ln.t("Auth > Login > New Browser > Code"),name:"code","prepend-icon":"vpn_key",type:"text"},model:{value:i.forms.loginNewBrowser.code,callback:function(e){i.$set(i.forms.loginNewBrowser,"code",e)},expression:"forms.loginNewBrowser.code"}}),i._v(" "),a("button",{staticStyle:{display:"none"}})],1)],1),i._v(" "),a("div",{class:i.$style.buttons},[a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/restore-password",expression:"'auth/restore-password'"}],attrs:{disabled:!1,loading:i.loading.loginNewBrowser,color:"red darken-2 white--text"},on:{click:i.verifyLoginNewBrowserCode}},[i._v(i._s(i.$ln.t("Auth > Restore Password > Proceed")))]),i._v(" "),a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/open-login-form",expression:"'auth/open-login-form'"}],attrs:{flat:"",color:"primary"},on:{click:i.showLoginForm}},[i._v(i._s(i.$ln.t("Auth > Registration > Remembered Password")))]),i._v(" "),a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/help",expression:"'auth/help'"}],attrs:{flat:"",color:"primary",loading:i.helpLoading},on:{click:i.openHelp}},[i._v(i._s(i.$ln.t("Common > Help")))])],1)]),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"activation"===i.mode,expression:"mode === 'activation'"},{name:"data-test",rawName:"v-data-test",value:"auth/activation-form",expression:"'auth/activation-form'"}],staticClass:"activation-form"},[a("div",{class:i.$style.content},[i.activationCodeFromUrl?i._e():a("div",{domProps:{innerHTML:i._s(i.$ln.t("Auth > Activation > Hint",{userMail:i.userMail}))}}),i._v(" "),a("v-form",{attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),i.activate(e)}}},[a("v-text-field",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/activation-code",expression:"`auth/activation-code`"}],ref:"activation.activationCode",attrs:{disabled:!!i.activationCodeFromUrl,"error-messages":i.validationResult.activation.activationCode,label:i.$ln.t("Auth > Activation > Activation Code"),autocomplete:"one-time-code",maxlength:"8","prepend-icon":"vpn_key",type:"text"},model:{value:i.forms.activation.activationCode,callback:function(e){i.$set(i.forms.activation,"activationCode",e)},expression:"forms.activation.activationCode"}},[i.activationCodeFromUrl?i._e():a("div",{attrs:{slot:"append"},slot:"append"},[i.activationMailRetryCountdown?a("span",{class:i.$style.forgotPassword},[i._v(i._s(i.activationMailRetryCountdown))]):a("a",{class:i.$style.forgotPassword,attrs:{href:"javascript:void(0);"},on:{click:i.resendActivationMail}},[i._v(i._s(i.$ln.t("Auth > Activation > Resend Activation Code")))])])]),i._v(" "),a("div",{staticClass:"mt-1",domProps:{innerHTML:i._s(i.$ln.t("Auth > Activation > City Description"))}}),i._v(" "),a("city-autocomplete",{staticClass:"mt-3",attrs:{prependIcon:"business",errorMessages:i.validationResult.activation.cityId,isModalShown:i.showAutocompleteDialog},on:{"toggle-modal":function(e){return i.showAutocompleteDialog=e}},nativeOn:{click:function(e){i.showAutocompleteDialog=!0}},model:{value:i.forms.activation.cityId,callback:function(e){i.$set(i.forms.activation,"cityId",e)},expression:"forms.activation.cityId"}}),i._v(" "),a("button",{staticStyle:{display:"none"}})],1)],1),i._v(" "),a("div",{class:i.$style.buttons},[a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/activate",expression:"'auth/activate'"}],attrs:{loading:i.loading.activation,color:"red darken-2 white--text"},on:{click:i.activate}},[i._v(i._s(i.dialog.activation.actionText))]),i._v(" "),i.mailClientUrl&&!i.activationCodeFromUrl?a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/open-mailbox",expression:"'auth/open-mailbox'"}],attrs:{href:i.mailClientUrl,flat:"",target:"_blank"}},[i._v(i._s(i.$ln.t("Auth > Open Mailbox")))]):i._e()],1)]),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"restore-password"===i.mode,expression:"mode === 'restore-password'"},{name:"data-test",rawName:"v-data-test",value:"auth/restore-password-form",expression:"'auth/restore-password-form'"}],staticClass:"restore-password-form"},[a("div",{class:i.$style.content},[i.isPasswordExpired?a("div",{key:"password-expired",class:i.$style.passwordExpiredHint,domProps:{innerHTML:i._s(i.$ln.t("Auth > Login Failed > Password Expired"))}}):i._e(),i._v(" "),a("div",{key:"hint",domProps:{innerHTML:i._s(i.$ln.t("Auth > Restore Password > Hint"))}}),i._v(" "),a("v-form",{attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),i.getFirstDigitsOfMobileNumber(e)}}},[a("v-text-field",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/email",expression:"`auth/email`"}],ref:"restorePassword.email",attrs:{"error-messages":i.validationResult.restorePassword.email,label:i.$ln.t("Auth > Email"),name:"email","prepend-icon":"email",type:"email"},model:{value:i.forms.restorePassword.email,callback:function(e){i.$set(i.forms.restorePassword,"email",e)},expression:"forms.restorePassword.email"}}),i._v(" "),a("button",{staticStyle:{display:"none"}})],1)],1),i._v(" "),a("div",{class:i.$style.buttons},[a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/restore-password",expression:"'auth/restore-password'"}],attrs:{disabled:!!i.activationMailRetryCountdown,loading:i.loading.restorePassword,color:"red darken-2 white--text"},on:{click:i.getFirstDigitsOfMobileNumber}},[i._v("\n        "+i._s(i.$ln.t("Auth > Restore Password > Proceed"))+"\n        "),i.activationMailRetryCountdown?a("span",[i._v(" ("+i._s(i.activationMailRetryCountdown)+")")]):i._e()]),i._v(" "),a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/open-login-form",expression:"'auth/open-login-form'"}],attrs:{flat:"",color:"primary"},on:{click:i.showLoginForm}},[i._v(i._s(i.$ln.t("Auth > Registration > Remembered Password")))]),i._v(" "),a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/help",expression:"'auth/help'"}],attrs:{flat:"",color:"primary",loading:i.helpLoading},on:{click:i.openHelp}},[i._v(i._s(i.$ln.t("Common > Help")))])],1)]),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"restore-password-mobile-number-complete"===i.mode,expression:"mode === 'restore-password-mobile-number-complete'"},{name:"data-test",rawName:"v-data-test",value:"auth/restore/mobile-number-complete-form",expression:"'auth/restore/mobile-number-complete-form'"}],staticClass:"restore-password-mobile-number-complete-form"},[a("div",{class:i.$style.content},[a("div",{domProps:{innerHTML:i._s(i.$ln.t("Auth > Restore Password > Hint Last Digits"))}}),i._v(" "),a("v-form",{attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),i.sendRestorePasswordCodes()}}},[a("v-text-field",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/restore/phone-digits",expression:"`auth/restore/phone-digits`"}],ref:"restorePasswordMobileNumberСomplete.lastDigits",class:i.$style.vuePrefix,attrs:{name:"last-digits",hint:i.$ln.t("Auth > Restore Password > Hint Last Digits 2"),type:"number","error-messages":i.validationResult.restorePasswordMobileNumberСomplete.lastDigits,prefix:i.restorePasswordMobileNumberFirstDigits,placeholder:"* * * * *",maxlength:"5"},model:{value:i.forms.restorePasswordMobileNumberСomplete.lastDigits,callback:function(e){i.$set(i.forms.restorePasswordMobileNumberСomplete,"lastDigits",e)},expression:"forms.restorePasswordMobileNumberСomplete.lastDigits"}}),i._v(" "),a("button",{staticStyle:{display:"none"}})],1),i._v(" "),i.restorePasswordMobileNumberLastDigitsNextAttemptTime?a("div",{staticClass:"mt-3"},[i._v("\n        "+i._s(i.$ln.t("Auth > New Password > Next Attempt In"))+"\n        "),a("m-relative-time",{key:"last-digits-countdown",attrs:{"target-time":i.restorePasswordMobileNumberLastDigitsNextAttemptTime,"time-units-count":1},on:{timeout:function(e){i.restorePasswordMobileNumberLastDigitsNextAttemptTime=0}}})],1):i._e()],1),i._v(" "),a("div",{class:i.$style.buttons},[a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/restore/complete",expression:"'auth/restore/complete'"}],attrs:{color:"red darken-2 white--text",disabled:i.restorePasswordMobileNumberLastDigitsNextAttemptTime>0,loading:i.loading.restorePasswordMobileNumberComplete},on:{click:function(e){return i.sendRestorePasswordCodes()}}},[i._v(i._s(i.$ln.t("Auth > Restore Password > Proceed")))]),i._v(" "),a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/help",expression:"'auth/help'"}],attrs:{flat:"",color:"primary",loading:i.helpLoading},on:{click:i.openHelp}},[i._v(i._s(i.$ln.t("Common > Help")))])],1)]),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"new-password"===i.mode,expression:"mode === 'new-password'"},{name:"data-test",rawName:"v-data-test",value:"auth/new-password-form",expression:"'auth/new-password-form'"}],staticClass:"new-password-form"},[i.newPasswordWrongUrl?a("div",{class:i.$style.content,domProps:{innerHTML:i._s(i.$ln.t("Auth > New Password > Hint Error"))}}):a("div",{class:i.$style.content},[i.newPasswordWrongCodeAfterTry?a("div",{staticClass:"mb-4",class:i.$style.warningCaption},[i.newPasswordSmsCodeRequired?a("div",[i._v("\n          "+i._s(i.$ln.t("Auth > New Password > Hint Error After Try"))+"\n        ")]):a("div",[i._v("\n          "+i._s(i.$ln.t("Auth > New Password > Hint Error After Try Email Only"))+"\n        ")]),i._v(" "),i.newPasswordNextAttemptTime?a("div",[i._v("\n          "+i._s(i.$ln.t("Auth > New Password > Next Attempt In"))+"\n          "),a("m-relative-time",{key:"next-attempt-countdown",attrs:{"target-time":i.newPasswordNextAttemptTime,"time-units-count":1},on:{timeout:function(e){i.newPasswordNextAttemptTime=0}}})],1):i._e()]):i._e(),i._v(" "),a("v-form",{attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),i.setNewPassword(e)}}},[a("div",{staticClass:"mb-4",class:i.$style.codeContainer},[a("div",{class:(o={},o[i.$style.warningCaption]=i.newPasswordEmailCaptionIsError,o),domProps:{innerHTML:i._s(i.newPasswordEmailCaption)}}),i._v(" "),a("v-text-field",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/new-password/code",expression:"`auth/new-password/code`"}],ref:"newPassword.emailCode",attrs:{maxlength:"8",label:i.$ln.t("Auth > New Password > Code From Email"),type:"text",autocomplete:"one-time-code","error-messages":i.validationResult.newPassword.emailCode,"prepend-icon":"vpn_key"},model:{value:i.forms.newPassword.emailCode,callback:function(e){i.$set(i.forms.newPassword,"emailCode",e)},expression:"forms.newPassword.emailCode"}},[i.activationCodeFromUrl?i._e():a("div",{attrs:{slot:"append"},slot:"append"},[i.restorePasswordEmailCodeNextAttemptTime?i._e():a("a",{class:i.$style.forgotPassword,attrs:{href:"javascript:void(0);"},on:{click:i.resendNewPasswordEmailCode}},[i._v(i._s(i.$ln.t("Auth > New Password > Resend Email")))])])]),i._v(" "),i.restorePasswordEmailCodeNextAttemptTime>0&&0===i.validationResult.newPassword.emailCode.length?a("div",{class:i.$style.timerHint},[i._v("\n            "+i._s(i.$ln.t("Auth > New Password > Next Email In"))+"\n            "),a("m-relative-time",{key:"email-countdown",attrs:{"target-time":i.restorePasswordEmailCodeNextAttemptTime,"time-units-count":1},on:{timeout:function(e){i.restorePasswordEmailCodeNextAttemptTime=0}}})],1):i._e()],1),i._v(" "),i.newPasswordSmsCodeRequired?a("div",{staticClass:"mb-4",class:i.$style.codeContainer},[a("div",{class:(s={},s[i.$style.warningCaption]=i.newPasswordSmsCaptionIsError,s),domProps:{innerHTML:i._s(i.newPasswordSmsCaption)}}),i._v(" "),a("v-text-field",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/new-password/sms-code",expression:"`auth/new-password/sms-code`"}],ref:"newPassword.smsCode",attrs:{label:i.$ln.t("Auth > New Password > Code From Sms"),type:"text",autocomplete:"one-time-code","error-messages":i.validationResult.newPassword.smsCode,"prepend-icon":"vpn_key"},model:{value:i.forms.newPassword.smsCode,callback:function(e){i.$set(i.forms.newPassword,"smsCode",e)},expression:"forms.newPassword.smsCode"}},[i.activationCodeFromUrl?i._e():a("div",{attrs:{slot:"append"},slot:"append"},[i.restorePasswordSmsCodeNextAttemptTime?i._e():a("a",{class:i.$style.forgotPassword,attrs:{href:"javascript:void(0);"},on:{click:i.resendNewPasswordSmsCode}},[i._v(i._s(i.$ln.t("Auth > New Password > Resend Sms")))])])]),i._v(" "),i.restorePasswordSmsCodeNextAttemptTime>0&&0===i.validationResult.newPassword.smsCode.length?a("div",{class:i.$style.timerHint},[i._v("\n            "+i._s(i.$ln.t("Auth > New Password > Next Sms In"))+"\n            "),a("m-relative-time",{key:"sms-countdown",attrs:{"target-time":i.restorePasswordSmsCodeNextAttemptTime,"time-units-count":1},on:{timeout:function(e){i.restorePasswordSmsCodeNextAttemptTime=0}}})],1):i._e()],1):i._e(),i._v(" "),!i.loading.newPasswordUserCityInfo&&i.newPasswordUserCityRequired?a("div",{staticClass:"mb-4"},[a("div",{domProps:{innerHTML:i._s(i.$ln.t("Auth > New Password > Hint City"))}}),i._v(" "),a("city-autocomplete",{attrs:{prependIcon:"business",errorMessages:i.validationResult.newPassword.cityId,isModalShown:i.showAutocompleteDialog},on:{"toggle-modal":function(e){return i.showAutocompleteDialog=e}},nativeOn:{click:function(e){i.showAutocompleteDialog=!0}},model:{value:i.forms.newPassword.cityId,callback:function(e){i.$set(i.forms.newPassword,"cityId",e)},expression:"forms.newPassword.cityId"}})],1):i._e(),i._v(" "),a("input",{staticClass:"pa-0 ma-0",staticStyle:{height:"0px"},attrs:{type:"text",autocomplete:"username"},domProps:{value:i.forms.restorePassword.email}}),i._v(" "),a("div",[a("div",{domProps:{innerHTML:i._s(i.$ln.t("Auth > New Password > Hint New Password"))}}),i._v(" "),a("v-text-field",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/new-password/password",expression:"`auth/new-password/password`"}],ref:"newPassword.newPassword",attrs:{label:i.$ln.t("Auth > New Password > Password"),"error-messages":i.validationResult.newPassword.newPassword,type:i.showPasswordOnNewPasswordField?"text":"password",hint:i.$ln.t("Hints > Password"),autocomplete:"new-password","prepend-icon":"lock","append-icon":i.showPasswordOnNewPasswordField?"visibility_off":"visibility"},on:{"click:append":function(e){i.showPasswordOnNewPasswordField=!i.showPasswordOnNewPasswordField}},model:{value:i.forms.newPassword.newPassword,callback:function(e){i.$set(i.forms.newPassword,"newPassword",e)},expression:"forms.newPassword.newPassword"}})],1),i._v(" "),a("button",{staticStyle:{display:"none"}})])],1),i._v(" "),a("div",{class:i.$style.buttons},[i.newPasswordWrongUrl?i._e():a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/new-password/set-password",expression:"'auth/new-password/set-password'"}],attrs:{color:"red darken-2 white--text",loading:i.loading.newPassword,disabled:!!i.newPasswordNextAttemptTime},on:{click:i.setNewPassword}},[i._v(i._s(i.$ln.t("Auth > New Password > Save Password")))]),i._v(" "),a("v-btn",{directives:[{name:"data-test",rawName:"v-data-test",value:"auth/help",expression:"'auth/help'"}],attrs:{flat:"",color:"primary",loading:i.helpLoading},on:{click:i.openHelp}},[i._v(i._s(i.$ln.t("Common > Help")))])],1)])])}),[],!1,(function injectStyles(e){this.$style=f.default.locals||f.default}),null,null);t.a=$.exports;b()($,{VBtn:y.a,VForm:x.a,VTextField:_.a})},1410:function(e,t,o){"use strict";var s=o(1193),i=o.n(s);o.d(t,"default",(function(){return i.a}))},1411:function(e,t,o){var s=o(25)(!1);s.push([e.i,".block-shadow_zWNXP{box-shadow:0 2px 4px 0 rgba(0,0,0,.1)}.link{color:#004b8e}.link:hover{color:#b71c1c}.newPasswordFormError_2VKoc,.passwordExpiredHint_xMvD9,.warningCaption_1gPrd{color:#d50000}.passwordExpiredHint_xMvD9{margin-bottom:8px}.codeContainer_3Ks1t{position:relative}.timerHint_2WwuY{font-size:12px;color:grey;margin-left:32px;margin-top:-16px;position:absolute}.vuePrefix_3lM0U .v-text-field__prefix{flex-shrink:0!important}.forgotPassword_cULxF{text-decoration:none;position:relative;top:5px;color:#d32f2f;font-size:.8em;transition:color .2s,font-size .2s}.forgotPassword_cULxF:focus,.forgotPassword_cULxF:hover{color:#4477a2}.forgotPassword_cULxF:active{color:#d32f2f}.forgotPassword_cULxF.loginFailed_1ABya{font-size:.9em}.buttons_VfLAi{display:flex;justify-content:flex-start;background:#f9f9f9;padding:8px 24px}@media only screen and (max-width:1263px){.buttons_VfLAi{padding:8px 16px}}.buttons_VfLAi .v-btn{margin-left:0!important;min-width:128px}@media only screen and (max-width:599px){.buttons_VfLAi{display:block}.buttons_VfLAi .v-btn{margin-right:0!important;width:100%}}.content_2JVhf{padding:16px 24px}@media only screen and (max-width:1263px){.content_2JVhf{padding:16px}}",""]),s.locals={"block-shadow":"block-shadow_zWNXP",newPasswordFormError:"newPasswordFormError_2VKoc",passwordExpiredHint:"passwordExpiredHint_xMvD9",warningCaption:"warningCaption_1gPrd",codeContainer:"codeContainer_3Ks1t",timerHint:"timerHint_2WwuY",vuePrefix:"vuePrefix_3lM0U",forgotPassword:"forgotPassword_cULxF",loginFailed:"loginFailed_1ABya",buttons:"buttons_VfLAi",content:"content_2JVhf"},e.exports=s},928:function(e,t,o){var s=o(958);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,o(26).default)("7b74da15",s,!0,{sourceMap:!1})},957:function(e,t,o){"use strict";var s=o(928),i=o.n(s);o.d(t,"default",(function(){return i.a}))},958:function(e,t,o){var s=o(25)(!1);s.push([e.i,".block-shadow_18IFN{box-shadow:0 2px 4px 0 rgba(0,0,0,.1)}.link{color:#004b8e}.link:hover{color:#b71c1c}.container_3W97X{display:flex;align-items:center}.container_3W97X.error_YoyuH{display:block}.container_3W97X.disabled_3t0dL .autocompleteWrapper_hEKcR{border-bottom:1px solid rgba(0,0,0,.15)}.container_3W97X.disabled_3t0dL .city_2YGlr{color:rgba(0,0,0,.45)}.container_3W97X.disabled_3t0dL .cityIcon_2AAk0{color:rgba(0,0,0,.25)}.formContainer_245sl{overflow:hidden}.textsContainer_GukQ_{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.fixedWidthOnSmAndUp_1fWfw{max-width:300px}@media only screen and (max-width:599px){.fixedWidthOnSmAndUp_1fWfw{max-width:unset}}.autocompleteWrapper_hEKcR{width:100%;display:flex;align-items:flex-end;justify-content:space-between;border-bottom:1px solid rgba(0,0,0,.42);padding-bottom:1px;outline:none}.autocompleteWrapper_hEKcR:focus{border-bottom:2px solid #004b8e;padding-bottom:0}.buttonLabel_286bp{color:rgba(0,0,0,.4);font-size:.95rem}.invisibleLabel_1Qxlz{visibility:hidden;opacity:0}.citySearchText_2D9CS{display:flex;flex-direction:column;align-items:flex-start;font-size:16px;max-width:calc(100% - 28px)}.cityIcon_2AAk0{margin-left:4px}.city_2YGlr{color:rgba(0,0,0,.65);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.prependIcon_19qy4{margin-right:10px}.region_39o2M{color:#9e9e9e}.icons_243hu{display:flex;padding-bottom:2px}.icons_243hu svg:hover{color:#b71c1c}.noCity_1mt7O{color:rgba(0,0,0,.54);font-size:16px;line-height:2.2rem;padding-top:13px}.noCity_1mt7O.error_YoyuH{color:#ff5252}.noCity_1mt7O.noLabel_ZWyeZ{padding-top:0}.errorMessage_3qxhi{display:flex;flex:1 0 auto;max-width:100%;font-size:.85rem;margin-top:4px;color:#ff5252;overflow:hidden}",""]),s.locals={"block-shadow":"block-shadow_18IFN",container:"container_3W97X",error:"error_YoyuH",disabled:"disabled_3t0dL",autocompleteWrapper:"autocompleteWrapper_hEKcR",city:"city_2YGlr",cityIcon:"cityIcon_2AAk0",formContainer:"formContainer_245sl",textsContainer:"textsContainer_GukQ_",fixedWidthOnSmAndUp:"fixedWidthOnSmAndUp_1fWfw",buttonLabel:"buttonLabel_286bp",invisibleLabel:"invisibleLabel_1Qxlz",citySearchText:"citySearchText_2D9CS",prependIcon:"prependIcon_19qy4",region:"region_39o2M",icons:"icons_243hu",noCity:"noCity_1mt7O",noLabel:"noLabel_ZWyeZ",errorMessage:"errorMessage_3qxhi"},e.exports=s},959:function(e,t,o){"use strict";var s=o(1),i=o(2),r=o(62),a=o(134),n=o(18),l=i.a.extend({props:{value:Object(n.f)({type:Number,required:!1}),prependIcon:{type:String,required:!1},isModalShown:{type:Boolean,default:!1},errorMessages:Object(n.f)({}),showResetButton:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},noLabel:{type:Boolean,default:!1}},data:()=>({searchString:""}),computed:{hasErrorMessage(){return!!(this.errorMessages&&this.errorMessages[0]&&this.errorMessages[0].length>0)},location(){return this.value?r.citiesGetters.getCity(this.$store)(this.value):null},locations(){return r.citiesGetters.getCitiesBySearchString(this.$store)(this.searchString)},popularCities(){return r.citiesGetters.popularCities(this.$store)}},components:{CitySelectionDialog:()=>o.e(195).then(o.bind(null,1678))},methods:{loadCity(){var e=this;return Object(s.a)((function*(){e.value&&(yield r.citiesActions.loadCity(e.$store,e.value))}))()},loadPopularCities(){var e=this;return Object(s.a)((function*(){yield r.citiesActions.loadPopularCities(e.$store)}))()},onSearchStringChangeFromModal(e){this.searchString=e},onChosenCityFromModal(e){e&&(this.$emit("input",e.id,e),this.$emit("toggle-modal",!1))},clearLocation(){this.$emit("input",null,null)}},mounted(){this.loadCity(),this.loadPopularCities()},watch:{value(){var e=this;return Object(s.a)((function*(){yield e.loadCity()}))()},searchString(){var e=this;return Object(s.a)((function*(){(yield Object(a.a)("city-autocomplete",300))&&e.searchString.length>1&&(yield r.citiesActions.searchCities(e.$store,e.searchString))}))()}}}),d=o(957),c=o(10);var m=Object(c.a)(l,(function(){var e,t,o=this,s=o.$createElement,i=o._self._c||s;return i("div",{class:(e={},e[o.$style.container]=!0,e[o.$style.error]=o.hasErrorMessage,e[o.$style.disabled]=o.disabled,e)},[i("city-selection-dialog",{key:o.$parent._uid,attrs:{value:o.isModalShown,locations:o.locations,chosenLocation:o.location,popularCities:o.popularCities},on:{"search-string-changed":o.onSearchStringChangeFromModal,"chosen-city":o.onChosenCityFromModal,"toggle-modal":function(e){return o.$emit("toggle-modal",e)}}}),o._v(" "),o.prependIcon?i("m-icon",{attrs:{cssClasses:o.$style.prependIcon,value:o.prependIcon}}):o._e(),o._v(" "),i("button",{class:o.$style.autocompleteWrapper,attrs:{id:"citySearch",type:"button",disabled:o.disabled}},[i("div",{class:o.$style.citySearchText},[o.location&&!o.noLabel?i("label",{class:o.$style.buttonLabel,attrs:{for:"citySearch"}},[o._v(o._s(o.$ln.t("Lots Filter > City")))]):o._e(),o._v(" "),o.location?i("div",{class:o.$style.city},[o._v("\n        "+o._s(o.location.name)+"\n        "),i("span",{class:o.$style.region},[o._v("- "+o._s(o.location.country))])]):i("div",{class:(t={},t[o.$style.noCity]=!0,t[o.$style.error]=o.hasErrorMessage,t[o.$style.noLabel]=o.noLabel,t)},[o._v("\n        "+o._s(o.$ln.t("Lots Filter > City"))+"\n      ")])]),o._v(" "),i("div",{class:o.$style.icons},[o.showResetButton&&o.location?i("m-icon",{attrs:{cssClasses:o.$style.removeCity,value:"clear"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),o.clearLocation(e)}}}):o._e(),o._v(" "),i("m-icon",{attrs:{cssClasses:o.$style.cityIcon,value:"arrow_drop_down"}})],1)]),o._v(" "),o.hasErrorMessage?i("div",{class:o.$style.errorMessage},[o._v("\n    "+o._s(o.errorMessages[0])+"\n  ")]):o._e()],1)}),[],!1,(function injectStyles(e){this.$style=d.default.locals||d.default}),null,null);t.a=m.exports},963:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o(47);var s=o(2);var i=o(167);var r=o(968),a=s.a.extend({data:()=>({forms:{},validationResult:{}}),computed:{rules:()=>({})},methods:{validateForm(e){var t=Object(r.b)(this.forms[e],this.rules[e],this.validationResult[e]);t||Object.keys(this.validationResult[e]).some((t=>0!==this.validationResult[e][t].length&&(this.focus("".concat(e,".").concat(t)),!0)));return t},focus(e){!function focus_focus(e){return t=>{e.$vuetify.breakpoint.xs||e.$nextTick((()=>{var o=e.$refs[t];o&&(o.focus(),e.$refs.dialog&&Object(i.a)(o,e.$refs.dialog))}))}}(this)(e)},blur(e){!function blur_blur(e){return t=>{var o=e.$refs[t];e.$nextTick((()=>{o&&o.blur()}))}}(this)(e)}},created(){var e=[];Object.keys(this.forms).forEach((t=>{Object.keys(this.forms[t]).forEach((o=>{e.push("forms.".concat(t,".").concat(o))}))})),e.forEach((e=>{this.$watch(e,(function(){for(var t=e.split("."),o=this.validationResult,s=1;s<t.length-1;s++)o=o[t[s]];o[t[t.length-1]]=[]}))}))}})},968:function(e,t,o){"use strict";o.d(t,"b",(function(){return validate})),o.d(t,"a",(function(){return resetValidation}));o(13),o(14);var s=o(2);function validate(e,t,o){var i=!0;for(var r of Object.keys(t)){var a=t[r];for(var n of(s.a.set(o,r,[]),a)){var l=n(e[r]);!0!==l&&(o[r].push(l),i=!1)}}return i}function resetValidation(e){for(var t of Object.keys(e))s.a.set(e,t,[])}}}]);