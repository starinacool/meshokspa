(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{1674:function(e,t,i){"use strict";i.r(t),i.d(t,"DrawerType",(function(){return m})),i.d(t,"showDrawer",(function(){return showDrawer})),i.d(t,"hideDrawer",(function(){return hideDrawer})),i.d(t,"isDrawerShown",(function(){return isDrawerShown}));var r=i(12),o=i(1),n=(i(27),i(24),i(0)),s=i(2),a=i(526),h=i(235),u=i(527),w=i(528),l=i(8),c=i(40),d=i(23),p=i(3),f=i(18),y=i(5),g=i(6);function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var m,D=s.a.extend({components:{SidePanel:a.a,FunctionalMenu:w.a,ProfileMenu:u.a,MessageMenuList:h.a},computed:{user(){return g.currentUserGetters.user(this.$store)},sidePanelStyle(){return this.left?{direction:"rtl"}:{}}},data:()=>({isShown:!1}),props:{left:{type:Boolean,default:!1},type:Object(f.f)({required:!0,validator:e=>e===m.Profile||e===m.Functional||e===m.Messages})},methods:{waitForClosing(){var e=this;return Object(o.a)((function*(){window.history&&(yield Object(n.Ve)((()=>isDrawerShown(e.type)),!1))}))()},showDrawer(){this.isShown||(this.isShown=!0,showDrawer(this.type))},hideDrawer(){this.isShown&&(this.isShown=!1,hideDrawer(this.type))},onFunctionalMenuItemSelected(e){var t=this;return Object(o.a)((function*(){if(t.hideDrawer(),yield t.waitForClosing(),"help"!==e)if("watching"===e||"biddings"===e||"bought"===e||"finished"===e)d.performWithAuth(t.$store,["account"],d.createBuyingItemDialog,Object(o.a)((function*(){var i=l.buyingGetters.lastBuyingRouteByType(t.$store)(e);t.$router.push(t.localePath(i))})));else if("cart"===e){var i=l.buyingGetters.lastBuyingRouteByType(t.$store)(e);t.$router.push(t.localePath(i))}else"lang"===e?d.showLanguageSelectionDialog(t.$store):"login"===e&&d.showAuthorizationDialog(t.$store,d.createCommonAuthDialog(t.$ln));else c.jivoActions.toggleChat(t.$store)}))()},onProfileMenuItemSelected(e){var t=this;return Object(o.a)((function*(){var i=y.authGetters.userId(t.$store);if(i)if(t.hideDrawer(),yield t.waitForClosing(),"help"!==e)if("activate"===e)d.showActivationDialog(t.$store,d.createCommonAuthDialog(t.$ln));else if("user-page"===e){var r={name:"user-main",params:{id:i.toString()}};t.$router.push(t.localePath(r))}else if("news"===e){t.$router.push(t.localePath({name:"news"}))}else if("settings"===e){t.$router.push(t.localePath({name:"profile"}))}else"logout"===e&&y.authActions.logout(t.$store);else c.jivoActions.toggleChat(t.$store)}))()},onNavigation(){!this.isShown&&isDrawerShown(this.type)?this.showDrawer():this.isShown&&!isDrawerShown(this.type)&&this.hideDrawer()},onInput(e){e?this.showDrawer():this.hideDrawer()}},mounted(){isDrawerShown(this.type)&&this.showDrawer(),window.addEventListener("popstate",this.onNavigation)},beforeDestroy(){p.a&&window.removeEventListener("popstate",this.onNavigation)},watch:{user(e){e||this.$emit("input",!1)},value:{immediate:!1,handler(e){e?this.showDrawer():this.hideDrawer()}}}});function showDrawer(e){if(window.history){var t=window.history.state||{};if(!t[e]){var i=_objectSpread(_objectSpread({},t),{},{[e]:!0});window.history.pushState(i,document.title,document.location.href);var r=new PopStateEvent("popstate",{state:i});window.dispatchEvent(r)}}}function hideDrawer(e){window.history&&window.history.state&&window.history.state[e]&&window.history.back()}function isDrawerShown(e){return window.history&&window.history.state&&!!window.history.state[e]}!function(e){e.Functional="functional-menu",e.Profile="profile-menu",e.Messages="messages-menu"}(m||(m={}));var v=D,S=i(10),b=Object(S.a)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("side-panel",{style:e.sidePanelStyle,attrs:{value:e.isShown,left:e.left,scrollOnOpen:"messages-menu"!==e.type,hideOnRouteChange:!1},on:{input:e.onInput}},["profile-menu"===e.type?i("profile-menu",{staticStyle:{width:"70vw","max-width":"340px"},on:{"profile-item-selected":e.onProfileMenuItemSelected}}):"functional-menu"===e.type?i("functional-menu",{staticStyle:{width:"80vw","max-width":"340px"},on:{"functional-item-selected":e.onFunctionalMenuItemSelected}}):"messages-menu"===e.type?i("message-menu-list",{staticStyle:{"max-width":"60vw",width:"500px"},attrs:{waitBeforeAction:e.waitForClosing}}):e._e()],1)}),[],!1,null,null,null);t.default=b.exports}}]);